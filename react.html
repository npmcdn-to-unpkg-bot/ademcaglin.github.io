<!DOCTYPE html>
<html>

<head>
<script data-require="babel@*" data-semver="5.6.15" src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.min.js"></script>
<script data-require="react@*" data-semver="0.13.3" src="http://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
</head>

<body>

<div id="object-rows">

</div>

<script type="text/babel">
class ObjectRows extends React.Component {
  constructor(props) {
    super(props);
    this.state = {avatar_url: ''};
  }
  loadUserInfo(){
    var full = window.location.host;
    var parts = full.split('.');
    var sub = parts[0];
    var apiUrl= 'https://api.github.com/users/' + sub;
    fetch(apiUrl).then(function(response) { 
  	   return response.json();
    }).then(function(data) {
        this.setState({avatar_url: data.avatar_url});
        console.log(JSON.stringify(data));
      }.bind(this));
  }
  componentDidMount() {
     this.loadUserInfo();
  }
  render() {
    return(
    <div>
    <img src={this.state.avatar_url} />
    <table>
     <tbody>
         {[...Array(5)].map((x, i) =>
          <ObjectRow key={i + 1} index={i + 1} />
         )}
     </tbody>
    </table>
    </div>
    )
  }
}
class ObjectRow extends React.Component {
  render() {
    return(
    <tr>
      <td>{this.props.index}</td>
    </tr>
    )
  }
}

React.render(<ObjectRows />, document.getElementById('object-rows'));
</script>

</body>

</html>
